<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="minimum-scale=0.5, initial-scale=1">
	<link data-trunk rel="rust" data-wasm-opt="z" />
	<link data-trunk rel="stylesheet" href="/assets/style.css" />
</head>

<body class="pc bp flx">
	<div class="sc flx fdc bp ma">
		<nav class="flx jcsb">
			<a class="bf hov bp rsb" href="/assets/login.html">/login</a>
			<a class="bf hov bp sb" href="/assets/login-file.html">/login-file</a>
			<a class="bf hov bp sb" href="/assets/register.html">/register</a>
			<a class="bf hov bp lsb" href="/assets/register-file.html">/register-file</a>
		</nav>
		<form class="flx fdc">
			<input id="nm" class="pc hov bp tbm" type="text" placeholder="new username" maxlength="32" required />
			<input id="pswd" class="pc hov bp tbm" type="password" placeholder="password" minlength="16"
				oninput="passwordUpdate()" required />
			<input id="pswd-r" class="pc hov bp tbm" type="password" placeholder="re-enter password"
				oninput="passwordUpdate()" required />
			<input id="confirm" class="pc hov bp tbm" type="button" value="register" disabled="true" />
		</form>
	</div>

	<script>
		const confirm = document.getElementById('confirm');
		const nm = document.getElementById('nm');
		const pswd = document.getElementById('pswd');
		const pswd_r = document.getElementById('pswd-r');

		function passwordUpdate() {
			if (pswd.value !== pswd_r.value) {
				pswd_r.setCustomValidity('passwords must match');
				if (pswd_r.value.length === pswd.value.length && pswd_r === document.activeElement)
					pswd_r.reportValidity();
			} else {
				pswd_r.setCustomValidity('');
			}

			confirm.disabled = !pswd.checkValidity() || !pswd_r.checkValidity() || !nm.checkValidity();
		}
	</script>
</body>

</html>
